<!DOCTYPE html> <html><head>
		<title>2.3进程同步和互斥 - review</title>
		<base href="..\..\../">
		<meta id="root-path" root-path="..\..\../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<!--<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">-->
		<meta charset="UTF-8">
		<meta name="description" content="2.3进程同步和互斥 - review">
		<meta property="og:title" content="2.3进程同步和互斥">
		<meta property="og:description" content="2.3进程同步和互斥 - review">
		<meta property="og:type" content="website">
		<meta property="og:url" content="./https://cs-note-three.vercel.app/review/操作系统/2.进程、线程/2.3进程同步和互斥.html">
		<meta property="og:image" content=".\https:\\cs-note-three.vercel.app\review\操作系统\2.进程、线程\img\pasted-image-20250524162954.png">
		<meta property="og:site_name" content="review">
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
		<meta http-equiv="Pragma" content="no-cache">
		<meta http-equiv="Expires" content="0">
		<meta name="ctime" content="1747979772604">
		<meta name="author" content="Apricity"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="./https://cs-note-three.vercel.app/lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script async="" id="pixi-script" src="lib/scripts/pixi.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script id="minisearch-script" src="lib/scripts/minisearch.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><script defer="" id="easy-notice-script" src="lib/scripts/easy-notice.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js?v=1.8.03&amp;t=1749829596004" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><script defer="" id="img-zoom-script" src="lib/scripts/img-zoom.js?v=1.8.03" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;);"></script><link rel="stylesheet" href="lib/styles/obsidian.css?v=1.8.03"><link rel="preload" href="lib/styles/other-plugins.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css?v=1.8.03"></noscript><link rel="preload" href="lib/styles/global-variable-styles.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css?v=1.8.03"></noscript><link rel="preload" href="lib/styles/supported-plugins.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css?v=1.8.03"></noscript><link rel="preload" href="lib/styles/main-styles.css?v=1.8.03" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css?v=1.8.03"></noscript><script>const LANG="zh-cn",VERSION="1.8.03",SHOW_COMMENTS=!0,SHOW_PAGE_HEADER=!0,SHOW_PAGE_FOOTER=!0,SHOW_RSS_FEED=!0,SHOW_SCROLL_TO_TOP=!0,SHOW_FILE_NUMBER=!0,EXPORT_PRESET="website",WALINE_SERVER_URL="https://cs-note-three.vercel.app/",AUTHOR="Apricity",VAULT_TITLE="review",FILE_COLORS={},DEFAULT_THEME="light",USE_FILE_COLOR_PLUGIN=!0,USE_BARTENDER_PLUGIN=!0</script><script src="https://unpkg.com/prismjs@1.29.0/prism.js" defer="defer"></script><script src="https://unpkg.com/lucide@latest"></script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline.css"><link rel="stylesheet" href="https://unpkg.com/@waline/client@v3/dist/waline-meta.css"><style>body{--font-ui-medium:16px}:root{--waline-font-size:16px;--waline-white:#fff;--waline-light-grey:#999;--waline-dark-grey:#666;--waline-theme-color:#27ae60;--waline-active-color:#2ecc71;--waline-color:#444;--waline-bg-color:var(--background-primary-alt);--waline-bg-color-light:#f8f8f8;--waline-bg-color-hover:#f0f0f0;--waline-border-color:#ddd;--waline-disable-bg-color:#f8f8f8;--waline-disable-color:#bbb;--waline-code-bg-color:#282c34;--waline-bq-color:#f0f0f0;--waline-avatar-size:3.25rem;--waline-m-avatar-size:calc(var(--waline-avatar-size) * 9 / 13);--waline-badge-color:#3498db;--waline-badge-font-size:0.775em;--waline-info-bg-color:#f8f8f8;--waline-info-color:#999;--waline-info-font-size:0.625em;--waline-border:1px solid var(--waline-border-color);--waline-avatar-radius:50%;--waline-box-shadow:none}.waline-theme-dark{--waline-white:#000;--waline-light-grey:#666;--waline-dark-grey:#999;--waline-color:#888;--waline-bg-color:var(--background-primary-alt);--waline-bg-color-light:#272727;--waline-border-color:#333;--waline-disable-bg-color:#444;--waline-disable-color:#272727;--waline-bq-color:#272727;--waline-info-bg-color:#272727;--waline-info-color:#666}.wl-power{display:none}.wl-reaction{margin-bottom:1em;text-align:left;margin-left:.5em}.wl-reaction-title{margin:20px auto}.wl-reaction-list{justify-content:left}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:17px!important}.wl-panel{margin:0}#waline{margin-top:50px!important;max-width:800px}.clickable-icon.sidebar-collapse-icon{width:2em!important;background-color:var(--background-secondary)}.graph-view-placeholder{width:22%;margin-left:38px}.tree-container .clickable-icon{margin-left:2px;border-radius:5px;border:none;box-shadow:none;display:flex;align-items:center;justify-content:center;margin-top:-3px}.document-container>.markdown-preview-view>.markdown-preview-sizer{max-width:100vw!important}body.show-inline-title .page-title{text-align:center}input[type=text],textarea{font-size:16px!important}input[type=search]{width:85%;border:1px solid #888;border-radius:5px;background-color:var(--background-primary);color:var(--text-muted)}.tree-container .clickable-icon{background-color:transparent}body{user-select:unset}blockquote{margin:0}#copyright{text-align:center;margin-top:80px!important}#copyright a{color:#ee802f;text-decoration:none;font-size:15px;margin-left:4px}#copyright a img{width:14px}.document-container>.markdown-preview-view>.markdown-preview-sizer pre{overflow:auto}.theme-light .document-container>.markdown-preview-view>.markdown-preview-sizer pre{position:relative;background-color:var(--background-primary-alt);border:1px solid #eeecec;border-radius:5px;padding:10px}.theme-dark .document-container>.markdown-preview-view>.markdown-preview-sizer pre{position:relative;background-color:var(--background-primary-alt);border:1px solid #373838;border-radius:5px;padding:10px}.markdown-rendered pre button.copy-code-button{position:absolute;top:7px;right:7px}.wl-header input{font-size:16px}.wl-reaction-votes{text-align:center}html>body>.webpage-container>.document-container>.markdown-preview-view>.markdown-preview-sizer>div.page-meta{text-align:center;padding:10px!important}.page-ctime,.waline-comment-count,.waline-pageview-count{margin-right:35px}.page-meta{color:#888}.page-meta svg{width:16px;vertical-align:middle}#qrcode{position:relative}#qr-zoom{position:absolute;width:170px;height:200px;z-index:999;display:none;border:1px solid #ccc;background:#fff}#qrcode:hover #qr-zoom{display:inline-block}#qr-zoom img{margin-top:10px}#qr-zoom font{margin-top:4px;display:inline-block}@media (max-width:768px){#qrcode{display:none!important}}#scrollToTopBtn{display:none;position:fixed;width:46px;height:46px;border:1px solid #ddd;border-radius:5px;background-color:var(--background-primary);text-align:center;bottom:75px;right:306px;opacity:.8}#scrollToTopBtn:hover{background-color:var(--background-primary-alt)}#scrollToTopBtn svg{margin-top:11px;color:var(--text-normal)}#scrollToTopBtn.st-collapsed{right:30px}@media (max-width:768px){#scrollToTopBtn{right:12px}#scrollToTopBtn.st-collapsed{right:12px}}.theme-dark #scrollToTopBtn{border:1px solid #999}.markdown-rendered pre button.copy-code-button{background-color:var(--background-primary);padding:3px 6px;border:1px solid #888;border-radius:5px;opacity:.9}.document-container.markdown-reading-view{background-color:var(--background-primary)}table{border:1px solid var(--table-border-color);border-radius:var(--size-2-3);border-spacing:0}td,th{padding:10px;border-right:1px solid var(--table-border-color);border-bottom:1px solid var(--table-border-color)}td:last-child,th:last-child{border-right:0}tr:last-child td,tr:last-child:not(:only-child) th{border-bottom:0}table>:only-child th{border-bottom:0}.document-container>.markdown-preview-view{margin:0;padding:var(--sidebar-margin)}.sidebar-content{background-color:var(--background-primary-alt)}.nav-folder-title[data-count]::after{content:attr(data-count);font-size:calc(100% * .8);margin-right:12px}.tree-container .tree-header{width:100%}#total-files{position:absolute;right:12px;color:var(--nav-item-color);font-size:calc(100% * .8)}.tree-container .collapse-icon{display:flex;align-items:center}.internal-embed.file-embed{cursor:pointer}.sidebar-content{padding-left:0;padding-right:0}.search-input-container{padding-left:10px}.tree-container{padding-left:12px;padding-right:12px}.graph-view-wrapper{padding-left:12px;padding-right:12px}.tree-container .tree-header,body .webpage-container .tree-container .tree-scroll-area{width:calc(100% - 12px)}.tree-container .clickable-icon svg{width:18px}ul.dataview.list-view-ul li{line-height:180%}#webpage-icon{display:none}.markdown-reading-view table{margin-block-start:var(--p-spacing);margin-block-end:var(--p-spacing)}li{line-height:180%}</style><script type="module">import{init}from"https://unpkg.com/@waline/client@v3/dist/waline.js";window.initWaline=e=>{e=e||document;const t=location.pathname.replace(/index\.html$/,"").replace(/\/$/,"")||"/",o=document.querySelector("#waline"),n=document.querySelector(".markdown-preview-sizer");if(!o){const e=document.createElement("div");e.id="waline",SHOW_COMMENTS||(e.style.display="none"),n.appendChild(e)}let i=document.querySelector(".page-meta");if(!i){const o=document.querySelector(".page-title");i=document.createElement("div"),i.className="page-meta",SHOW_PAGE_HEADER||(i.style.display="none");const n=e.querySelector('meta[name="ctime"]')?.getAttribute("content")||"";let c='<span title="创建时间"><i data-lucide="clock"></i> <span class="page-ctime">'+timestampToTimeString(+n)+"</span></span> ";SHOW_COMMENTS&&(c+='<span title="评论量"><i data-lucide="message-circle-more"></i> <span class="waline-comment-count" data-path="'+t+'">0</span></span> '),c+='<span title="阅读量"><i data-lucide="eye"></i> <span class="waline-pageview-count" data-path="'+t+'">1</span></span> ',c+='<span id="qrcode" title="手机查看"><i data-lucide="qr-code"></i><span id="qr-zoom"><img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data='+encodeURIComponent(location.href)+'" /><br /><font>手机查看</font></span></span>',i.innerHTML=c,o.after(i),lucide.createIcons()}try{(SHOW_PAGE_HEADER||SHOW_COMMENTS)&&init({el:"#waline",reaction:!0,dark:!1,copyright:!1,pageview:!0,comment:!0,path:t,serverURL:WALINE_SERVER_URL||"",locale:{reaction0:"点赞",reaction1:"踩一下",reaction2:"酷毙了",reaction3:"不屑",reaction4:"尴尬",reaction5:"无聊"}})}catch(e){console.log(e)}if(SHOW_SCROLL_TO_TOP&&!document.getElementById("scrollToTop")){const e=document.createElement("div");e.id="scrollToTop",e.innerHTML='<div id="scrollToTopBtn"><i data-lucide="arrow-up-to-line"></i></div>',n.appendChild(e),lucide.createIcons();var c=document.querySelector(".document-container>.markdown-preview-view"),a=document.getElementById("scrollToTopBtn");c.addEventListener("scroll",(function(){var e=c.scrollTop,t=.25*c.clientHeight;a.style.display=e>t?"block":"none"})),a.addEventListener("click",(function(){var e=document.querySelector(".document-container>.markdown-preview-view");"scrollBehavior"in document.documentElement.style?e.scrollTo({top:0,behavior:"smooth"}):e.scrollTop=0})),onToggleCollapsedChangedToTop();document.querySelector(".sidebar-right .clickable-icon.sidebar-collapse-icon").addEventListener("click",(()=>{setTimeout((()=>{onToggleCollapsedChangedToTop()}),42)}))}document.querySelectorAll(".document-container>.markdown-preview-view>.markdown-preview-sizer pre").forEach((e=>{e.addEventListener("scroll",(()=>{const t=e.querySelector(".copy-code-button"),o=t.getBoundingClientRect();t.style.right="auto",t.style.left=e.scrollLeft+e.offsetWidth-o.width-8+"px"}))})),setTimeout((()=>{if(!SHOW_COMMENTS)return;const e=document.querySelector(".wl-count");new MutationObserver((e=>{e.forEach((e=>{"characterData"!==e.type&&"childList"!==e.type||e.target.firstChild&&(document.querySelector(".waline-comment-count").innerHTML=e.target.firstChild.textContent)}))})).observe(e,{attributes:!1,childList:!0,subtree:!0,characterData:!0})}),100)}</script><script>function onAsyncLoadedDocument(e,t){togglePrismTheme("dark"!==localStorage.getItem("theme")),setTimeout((()=>{loadSpecialImg()}),42),initWaline(t),copyright(),initImgZoom(),attachDownload()}function toggleWalineTheme(e){e||document.body.classList.contains("waline-theme-dark")?document.body.classList.remove("waline-theme-dark"):document.body.classList.add("waline-theme-dark")}function onThemeToggle(e){toggleWalineTheme(e),togglePrismTheme(e)}function onSidebarCollapsed(e,t,o){const n=o.classList.contains("sidebar-left"),i=document.body.classList.contains("floating-sidebars");if(onToggleCollapsedChangedToTop(),i){const t=document.querySelector("#sidebarMask"),o=document.querySelector(".sidebar-left .tree-scroll-area"),i=isMobile();e?(t&&(t.style.display="none"),n&&o&&i&&(o.style.display="none")):(t&&(t.style.display="block"),n&&o&&i&&setTimeout((()=>{o.style.display="block"}),100))}}function onToggleCollapsedChangedToTop(){if("undefined"!=typeof scrollToTopBtn){document.querySelector(".sidebar-right").classList.contains("is-collapsed")?scrollToTopBtn.classList.add("st-collapsed"):scrollToTopBtn.classList.remove("st-collapsed")}}function copyright(){let e="© "+(new Date).getFullYear()+" "+(AUTHOR||document.querySelector('meta[name="author"]')?.getAttribute("content")||VAULT_TITLE)+' <font color="#ee802f">♡</font> 由obsidian强力驱动';SHOW_RSS_FEED&&(e+='&nbsp;<a href="lib/rss.xml"><img src="https://s21.ax1x.com/2024/04/21/pkpNoSf.png" />RSS</a>');const t=document.querySelector(".markdown-preview-sizer"),o=document.createElement("div");o.id="copyright",SHOW_PAGE_FOOTER||(o.style.display="none"),o.innerHTML=e,t.appendChild(o)}function timestampToTimeString(e){e=e||null;let t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")}function togglePrismTheme(e){const t=e?"":"-dark",o=document.getElementById("prism-theme"),n="https://unpkg.com/prismjs@1.29.0/themes/prism"+t+".min.css";if(o&&o.href===n)return;const i=document.createElement("link");i.id="prism-theme",i.rel="stylesheet",i.href=n,i.onload=()=>{o&&o.remove()},document.head.appendChild(i)}function onDomReady(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function isMobileMedia(e=768){return window.matchMedia("(max-width: "+e+"px)").matches}function initImgZoom(){ImgZoom(".document-container>.markdown-preview-view>.markdown-preview-sizer > div:not(.page-meta,.mod-footer,#waline,#scrollToTop,#copyright) img")}function onSearch(){document.querySelector(".sidebar-left input[type=search]").addEventListener("input",(e=>{setTimeout((()=>setTreeCount()),42)}))}function setTreeCount(){const e=document.querySelector(".sidebar-left .file-tree").querySelectorAll(".nav-file:not(.filtered-out)").length;if(document.querySelector("#total-files"))document.querySelector("#total-files").innerHTML=e;else{const t=document.querySelector(".tree-container .tree-header"),o=document.createElement("span");o.id="total-files",o.innerHTML=e,t.appendChild(o)}document.querySelectorAll(".sidebar-left .file-tree .nav-folder:not(.filtered-out) .tree-link .nav-folder-title").forEach((e=>{const t=e.parentElement.nextElementSibling.querySelectorAll(".nav-file:not(.filtered-out)").length;e.dataset.count=t}))}function observeTreeAreaResize(){const e=document.querySelector(".webpage-container .tree-container .tree-scroll-area");new ResizeObserver((()=>{document.querySelector("#total-files").style.right=e.offsetWidth-e.clientWidth+12+"px"})).observe(e)}function onSearchIndexing(){document.querySelector(".sidebar-left input[type=search]").placeholder="zh-cn"===LANG?"正在建立全文索引...":"Full-text indexing..."}function onSearchReady(){document.querySelector(".sidebar-left input[type=search]").placeholder="Search..."}function loadSpecialImg(){document.querySelectorAll("img[src*='+']").forEach((e=>{e.setAttribute("src",URLencode(e.getAttribute("src")))}))}function attachDownload(){setTimeout((()=>{document.querySelectorAll(".internal-embed.file-embed").forEach((e=>{e.onclick=()=>{window.open(e.getAttribute("src"))}}))}),42)}function onScrollIntoViewStart(e,t,o){setTimeout((()=>{const e=document.querySelector(".document-container>.markdown-preview-view");e.scrollLeft>0&&e.scrollTo(0,e.scrollTop)}),1500)}togglePrismTheme("dark"!==localStorage.getItem("theme")),onDomReady((()=>{let e=0;const t=(o=50)=>{const n=document.querySelector(".mod-tree-file .tree-link[href='index.html'] .tree-item-title");if(!(e>6e4)){if(n&&"index"===n.innerHTML)return n.innerHTML="首页",void loadSpecialImg();e+=o,setTimeout((()=>{t(o)}),o)}};"zh-cn"===LANG&&t(),initWaline(),toggleWalineTheme("dark"!==localStorage.getItem("theme")),copyright(),document.querySelector(".document-container").classList.remove("hide");const o=setInterval((()=>{const e=document.querySelector(".nav-file.mod-active");e&&e.parentElement&&(o&&clearInterval(o),setTimeout((()=>{if(setTimeout((()=>{const e=document.querySelectorAll(".tree-container .collapse-icon");e.length>0&&void 0===e[0].style.translate&&e.forEach((e=>{e.style.left=0}))}),50),SHOW_FILE_NUMBER&&(setTreeCount(),observeTreeAreaResize(),onSearch()),FILE_COLORS&&USE_FILE_COLOR_PLUGIN&&Object.getOwnPropertyNames(FILE_COLORS).length)for(const e in FILE_COLORS){const t=document.querySelector(".sidebar-left .tree-link[data-path='"+e+"'] .tree-item-title");t&&(t.style.color=FILE_COLORS[e])}attachDownload()}),42))}),50),n=document.createElement("div");n.id="sidebarMask",n.style="position:fixed;top:0;left:0;opacity:0;z-index:9;width:100%;height:100%;display:none;",n.onclick=function(){this.style.display="none"},document.body.appendChild(n),initImgZoom(),document.querySelector(".webpage-container input[type=search]").addEventListener("input",(e=>{searchReady||EasyNotice&&EasyNotice.createNotice("zh-cn"===LANG?"正在建立全文索引，请稍后重试...":"Full-text indexing, please try again later.",1500,"left:12px;top:12px;",!0,!1)}))}))</script></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon AT-row"><script defer="">let theme=localStorage.getItem("theme")||DEFAULT_THEME||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html?v=1.8.03&amp;t=1749829596041"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles">mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-mrow{display:inline-block;text-align:left}mjx-c.mjx-c28.TEX-S3::before{padding:1.45em .736em .949em 0;content:"("}mjx-c.mjx-c29.TEX-S3::before{padding:1.45em .736em .949em 0;content:")"}mjx-c.mjx-cD7::before{padding:.491em .778em 0 0;content:"×"}mjx-mtext{display:inline-block;text-align:left}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c1D43B.TEX-I::before{padding:.683em .888em 0 0;content:"H"}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"∗"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-c.mjx-cB7::before{padding:.31em .278em 0 0;content:"⋅"}mjx-c.mjx-c2228::before{padding:.598em .667em .022em 0;content:"∨"}mjx-c.mjx-c1D442.TEX-I::before{padding:.704em .763em .022em 0;content:"O"}mjx-c.mjx-c1D439.TEX-I::before{padding:.68em .749em 0 0;content:"F"}mjx-c.mjx-c1D462.TEX-I::before{padding:.442em .572em .011em 0;content:"u"}mjx-c.mjx-c1D461.TEX-I::before{padding:.626em .361em .011em 0;content:"t"}mjx-c.mjx-c1D44D.TEX-I::before{padding:.683em .723em 0 0;content:"Z"}mjx-c.mjx-c2026::before{padding:.12em 1.172em 0 0;content:"…"}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-msub{display:inline-block;text-align:left}mjx-msup{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-c.mjx-c5B::before{padding:.75em .278em .25em 0;content:"["}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c1D435.TEX-I::before{padding:.683em .759em 0 0;content:"B"}mjx-c.mjx-c5D::before{padding:.75em .278em .25em 0;content:"]"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D45A.TEX-I::before{padding:.442em .878em .011em 0;content:"m"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c1D449.TEX-I::before{padding:.683em .769em .022em 0;content:"V"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-cAC::before{padding:.356em .667em 0 0;content:"¬"}mjx-c.mjx-c1D446.TEX-I::before{padding:.705em .645em .022em 0;content:"S"}mjx-c.mjx-c2295::before{padding:.583em .778em .083em 0;content:"⊕"}mjx-c.mjx-c1D44B.TEX-I::before{padding:.683em .852em 0 0;content:"X"}mjx-c.mjx-c1D44C.TEX-I::before{padding:.683em .763em 0 0;content:"Y"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;font-size-adjust:none;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mi{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-texatom{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c1D436.TEX-I::before{padding:.705em .76em .022em 0;content:"C"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c1D448.TEX-I::before{padding:.683em .767em .022em 0;content:"U"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c2F::before{padding:.75em .5em .25em 0;content:"/"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}</style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="基本概念的引入"><p dir="auto">基本概念的引入</p></h1><div class="el-h1 heading-wrapper"><div class="heading-children"><div class="el-p"><p dir="auto"><strong>为什么需要进程同步</strong><br>
答：因为程序异步执行都会以独立的，不可预知的速度向前推进，但是有的进程之间有相互约束，所以需要将进程按照一定顺序执行</p></div><div class="el-p"><p dir="auto"><strong>什么是进程同步</strong><br>
答：同步亦称为直接制约关系，它是指为了完成某个任务而建立的两个或多个进程，这些进程因为需要在某些位置上协调它们的工作次序而产生的制约关系，进程之间的直接相互制约关系就是源于他们之间的相互合作</p></div><div class="el-p"><p dir="auto"><strong>什么是进程互斥</strong><br>
答：在一个时间段内只允许一个进程访问的资源，这种资源也称为临界资源，对临界资源的访问就需要互斥的进行</p></div><div class="el-p"><p dir="auto">对于临界资源的互斥访问，可以在逻辑上分为四个部分</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	entry section<span class="token punctuation">;</span>        <span class="token comment">//进入区</span>
	critical section<span class="token punctuation">;</span>     <span class="token comment">//临界区</span>
	exit section<span class="token punctuation">;</span>         <span class="token comment">//退出区</span>
	remainder section<span class="token punctuation">;</span>    <span class="token comment">//剩余区</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">进入区：作用就是检查能不能访问这个临界区资源的作用，如果可以的话，就会对临界资源进行上锁的操作，其他进程想要访问临界资源的时候，检查进入区就会发现有进程正在访问临界区资源</li>
<li data-line="1" dir="auto">临界区：就是实际访问临界区资源的那段代码（例如打印机打印输出，对打印机执行的写操作就是临界区）</li>
<li data-line="2" dir="auto">退出区：作用就是解除正在访问临界区资源的标志，可以理解为解锁</li>
<li data-line="3" dir="auto">剩余区：代码中的其余部分
<blockquote dir="auto">
<p>临界区是访问临界资源的代码，进入区和退出区是负责实现互斥的代码段<br>
临界区也可称为临界段</p>
</blockquote>
</li>
</ul></div><div class="el-p"><p dir="auto"><strong>需要遵循的原则</strong></p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">空闲让进：临界区空闲时，可以允许有一个请求进入临界区的进程立即进入临界区【必须实现】</li>
<li data-line="1" dir="auto">忙则等待：若已有进程在访问临界区的话，那么其余进程就需要等待【必须实现】</li>
<li data-line="2" dir="auto">有限等待：对于请求访问临界区的进程，需要保证其在有限的时间内能够进入临界区（避免饥饿现象）【必须实现】</li>
<li data-line="3" dir="auto">让权等待：当进程不能进入临界区时，应该立即释放处理机，防止进程处于忙等待的状态【<font color="#ff0000">不一定非得实现</font>】</li>
</ul></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="进程互斥的软件实现方法" dir="auto" class="heading" id="进程互斥的软件实现方法">进程互斥的软件实现方法</h1><div class="heading-children"><div class="el-h2 heading-wrapper"><h2 data-heading="单标志法" dir="auto" class="heading" id="单标志法"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>单标志法</h2><div class="heading-children"><div class="el-p"><p dir="auto">算法思想：两个进程在访问完临界区之后会把临界区的权限交给另一个进程，也就是说每个进程进入临界区的权限只能由另一个进程赋予</p></div><div class="el-p"><p dir="auto">定义一个变量 turn</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">如果 turn = 0 的话，则允许 0 号进程进入临界区</li>
<li data-line="1" dir="auto">如果 turn = 1 的话，则允许 1 号进程进入临界区</li>
</ul></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token comment">//进程0</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>turn ！<span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//进入区，判断是否允许当前进程访问临界区</span>
critical section<span class="token punctuation">;</span>    <span class="token comment">//临界区：进入临界区访问临界资源</span>
turn <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token comment">//退出区：修改turn的值,将临界区资源交给下一个进程</span>
remainder section<span class="token punctuation">;</span>   <span class="token comment">//执行剩余区代码</span>

<span class="token comment">//进程1</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>turn ！<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//如果不等于1，那么就一直循环等待</span>
critical section<span class="token punctuation">;</span>
turn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
remainder section<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>如果此时 turn = 0，但是进程 1 调用临界区资源，则会一直卡在进入区的部分，直到时间片用完，然后进行调度，切换进程 1 上处理机运行<br>
此时进程 0 正在访问临界资源，如果此时发生进程调度，进程切换为进程 1，进程仍然会卡在进入区，直到时间片用完</p>
</blockquote></div><div class="el-p"><p dir="auto"><strong>因此上述算法可以实现最多时刻只允许一个进程访问临界区资源</strong></p></div><div class="el-h3 heading-wrapper"><h3 data-heading="问题的产生" dir="auto" class="heading" id="问题的产生"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>问题的产生</strong></h3><div class="heading-children"><div class="el-p"><p dir="auto">因为此算法每次只能由一个进程访问临界区资源，并且需要交替的访问，如果某一个进程不再进入临界区，那么另外一个进程也无法访问临界资源（例如，进程 P 顺利从临界区离开，将临界资源给进程 Q 使用，但是如果 Q 没有进入临界区的打算，也会导致进程 P 无法访问临界资源，因为 turn 的值声明只能由进程 Q 访问临界资源），<br>
<font color="#92d050">违反了空闲让进的原则</font></p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="双标志先检查法" dir="auto" class="heading" id="双标志先检查法"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>双标志先检查法</h2><div class="heading-children"><div class="el-p"><p dir="auto">设置一个 bool 类型的数组 flag[]，如果 bool 值为 false 时，说明对应进程不想进入临界区，如果 bool 值为 true 时，说明对应进程需要进入临界区<br>
每一个进程在进入临界区之前都会检查对方是否想进入临界区</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token comment">//进程0</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//如果对方想用，那么一直循环等待</span>
flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
critical section<span class="token punctuation">;</span>
flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
remainder section<span class="token punctuation">;</span>

<span class="token comment">//进程1</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
critical section<span class="token punctuation">;</span>
flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
remainder section<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">进程在访问临界资源时，首先检查另一个进程是否想访问临界区资源</li>
<li data-line="1" dir="auto">如果想则就会陷入循环等待</li>
<li data-line="2" dir="auto">如果不想，那么该进程就会访问临界资源，将自己的 flag 值设为 true，使用完临界资源之后将 flag 值设为 false</li>
</ul></div><div class="el-h3 heading-wrapper"><h3 data-heading="问题的产生" dir="auto" class="heading" id="问题的产生"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>问题的产生</strong></h3><div class="heading-children"><div class="el-p"><p dir="auto">如果两个进程在并发执行时，如果在进程 1 判断完成之后，执行 flag 值转换之前，如果此时发生系统调度，转到进程 0，此时进程 0 会发现进程 1 的 flag = false，此时进程 1 会访问对应的临界资源，然而进程 1 此时也想要访问临界资源，所以此时就出现问题，两个进程同时进入了临界区<br>
<font color="#92d050">违反了“忙则等待”的原则，原因在于“检查”和“上锁”两个处理不是一气呵成的，二者之间可能会发生进程调度</font></p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="双标志后检查法" dir="auto" class="heading" id="双标志后检查法"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>双标志后检查法</h2><div class="heading-children"><div class="el-p"><p dir="auto">算法思想：与双标志先检查法的不同的是，在此算法中会先上锁然后再检查</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token comment">//进程0</span>
flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token comment">//先上锁</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//对方想用则循环等待</span>
critical section<span class="token punctuation">;</span>
flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
remainder section<span class="token punctuation">;</span>

<span class="token comment">//进程1</span>
flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
critical section<span class="token punctuation">;</span>
flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
remainder section<span class="token punctuation">;</span>

</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">进程在访问临界资源时，先上锁，将对应 flag 的值置为 true</li>
<li data-line="1" dir="auto">检查另一进程是否想要访问临界资源</li>
<li data-line="2" dir="auto">如果另一进程不想访问临界资源，那么当前进程就进行临界资源的访问</li>
</ul></div><div class="el-h3 heading-wrapper"><h3 data-heading="问题的产生" dir="auto" class="heading" id="问题的产生"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><strong>问题的产生</strong></h3><div class="heading-children"><div class="el-p"><p dir="auto">当进程 1 先发起资源请求时，此时会将 flag 置为 1，然后再判断，如果此时发生进程中断，进程 0 如果提出临界资源的访问，然后再判断，此时因为进程 1 的 flag 为 1，所以会等时间片用完之后调度进程 0，然而进程 0 面对的也是同样的问题，两个进程都无法访问临界资源，产生饥饿现象<br>
<font color="#92d050">违背了“空闲让进”和“有限等待”的原则</font></p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="Peterson 算法" dir="auto" class="heading" id="Peterson_算法"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Peterson 算法</h2><div class="heading-children"><div class="el-p"><p dir="auto">算法思想：结合了单标志法和双标志法的核心，如果双方都争着进入临界区，进程就会将临界区让给对方</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">bool</span> flag<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">//用来表示临界区意愿的数组，初始值都是false</span>
<span class="token keyword">int</span> turn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">//turn表示优先让哪个进程访问临界区</span>
c
<span class="token comment">//进程0</span>
flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token comment">//表示自己想要进入临界区</span>
turn <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>          <span class="token comment">//将turn的值设为对方的编号，表示对方可以优先进入</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>turn <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//对方想进入临界区,并且是我自己表达的谦让，对方并没有让回来</span>
critical section<span class="token punctuation">;</span>
flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
remainder section<span class="token punctuation">;</span>

<span class="token comment">//进程1</span>
flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
turn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&amp;&amp;</span>turn <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
critical section<span class="token punctuation">;</span>
flag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
remainder section<span class="token punctuation">;</span>

</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><font color="#92d050">该算法并未遵循“让权等待”的原则</font></p></div></div></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="进程互斥的硬件实现方法" dir="auto" class="heading" id="进程互斥的硬件实现方法">进程互斥的硬件实现方法</h1><div class="heading-children"><div class="el-h2 heading-wrapper"><h2 data-heading="中断屏蔽法" dir="auto" class="heading" id="中断屏蔽法"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>中断屏蔽法</h2><div class="heading-children"><div class="el-p"><p dir="auto">一个进程在访问临界资源之前会执行关中断指令，访问完成之后再关中断</p></div><div class="el-pre"><pre><code data-line="0">关中断
临界区
开中断
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">关中断之后不允许当前进程被中断，必然也不会发生进程切换，直到访问完临界区的资源之后，执行开中断指令，才有可能有别的进程上处理机并访问临界区<br>
优点：<br>
简单、高效</p></div><div class="el-p"><p dir="auto">缺点：</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">不适用于多处理机系统，因为一个 CPU 上的关中断不能限制其他 CPU 对临界资源的访问</li>
<li data-line="1" dir="auto">只适用于内核进程，将关中断和开中断的权限交给用户态程序很不明智，如果一个进程关中断之后不再开中断，系统很可能因此停止</li>
<li data-line="2" dir="auto">限制了 CPU 交替执行程序的能力，因此效率会明显降低</li>
</ol></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="TestAndSet 指令" dir="auto" class="heading" id="TestAndSet_指令"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>TestAndSet 指令</h2><div class="heading-children"><div class="el-p"><p dir="auto">——TS（TSL）指令是<strong>硬件实现</strong>的，只能一气呵成，不允许被中断<br>
算法思想：为临界资源设置一个共享变量 lock 表示该资源的两种状态，true 表示该资源被占用，false 表示未被占用</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token comment">/*
bool类型变量lock表示临界区是否被加锁
true表示已加锁，false表示为加锁
下面只是指令的功能描述，并非使用代码实现，实际是由硬件实现的，是能一气呵成的实现，不能中断
*/</span>
<span class="token keyword">bool</span> <span class="token function">TestAndSet</span><span class="token punctuation">(</span><span class="token keyword">bool</span> <span class="token operator">*</span>lock<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">bool</span> old<span class="token punctuation">;</span>
	old <span class="token operator">=</span> <span class="token operator">*</span>lock<span class="token punctuation">;</span>     <span class="token comment">//old用来保存以前的值</span>
	<span class="token operator">*</span>lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token comment">//当前进程需要访问临界资源</span>
	<span class="token keyword">return</span> old<span class="token punctuation">;</span>      <span class="token comment">//返回之前的lock值</span>
<span class="token punctuation">}</span>

<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">TestAndSet</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//如果之前的lock为true的话，那么一直循环等待其他进程的解锁</span>
临界区代码<span class="token punctuation">;</span>
lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>       <span class="token comment">//解锁</span>
剩余区代码<span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>解决了双标志位先检查法的问题：上锁和检查不是一气呵成的，在 TestAndSet 指令中是一气呵成的</strong><br>
未能实现让权等待，因为等待进入临界区的进程会占用 CPU 执行 TS 指令</p></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="SWAP 指令" dir="auto" class="heading" id="SWAP_指令"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>SWAP 指令</h2><div class="heading-children"><div class="el-p"><p dir="auto">——Swap 指令也叫 Exchange 指令或者简称 XCHG 指令<br>
Swap 指令是用<strong>硬件</strong>实现的，执行过程同样不允许被中断，只能一气呵成，下面使用 c 描述</p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">
<span class="token comment">//Swap指令的作用是交换两个变量的值</span>
<span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span>bool <span class="token operator">*</span>a<span class="token punctuation">,</span>bool <span class="token operator">*</span>b<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bool temp <span class="token operator">=</span> <span class="token operator">*</span>a<span class="token punctuation">;</span>
	<span class="token operator">*</span>a <span class="token operator">=</span> <span class="token operator">*</span>b<span class="token punctuation">;</span>
	<span class="token operator">*</span>b <span class="token operator">=</span> temp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//下面是使用swap指令实现互斥的算法逻辑</span>
<span class="token comment">//lock表示的是临界区资源是否加锁</span>
bool old <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>old <span class="token operator">==</span> true<span class="token punctuation">)</span><span class="token comment">//如果old一直为true就执行循环，lock为false并且与old进行交换，然后跳出循环</span>
	<span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">,</span><span class="token operator">&amp;</span>old<span class="token punctuation">)</span><span class="token punctuation">;</span>
临界区代码段     <span class="token comment">//进入临界区</span>
lock <span class="token operator">=</span> false<span class="token punctuation">;</span>
剩余区代码段
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div></div></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="锁" dir="auto" class="heading" id="锁">锁</h1><div class="heading-children"><div class="el-h2 heading-wrapper"><h2 data-heading="互斥锁" dir="auto" class="heading" id="互斥锁"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>互斥锁</h2><div class="heading-children"><div class="el-p"><p dir="auto">——解决临界区资源最简单的工具就是互斥锁</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">一个进程在进入临界区时应获得锁</li>
<li data-line="1" dir="auto">进程在退出临界区时应该释放锁</li>
</ul></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded"><span class="token comment">//获得锁</span>
viod <span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>available<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//忙等待，有其他进程获得了锁，所以需要一直循环等待锁的释放</span>
	available <span class="token operator">=</span> false<span class="token punctuation">;</span>      <span class="token comment">//获得锁，将资源可访问设置为false</span>
<span class="token punctuation">}</span>

<span class="token comment">//释放锁</span>
viod <span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	available <span class="token operator">=</span> true<span class="token punctuation">;</span>       <span class="token comment">//将资源可访问设置为true</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">缺点：<br>
互斥锁的主要缺点就是忙等待，当一个进程在临界区，那么其他进程需要连续循环调用 acquire，当进程共享一个 CPU 时就浪费了 CPU 周期<br>
<strong>所以互斥锁一般用于多处理机，一个线程在一个 CPU 上等待时，其他线程可以在其他 CPU 上运行</strong></p></div><div class="el-p"><p dir="auto">需要连续忙等待的互斥锁都成为自旋锁，如 TSL 指令、swap 方法、单标志法</p></div><div class="el-p"><p dir="auto">特点：</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">需忙等，进程时间片用完才下处理机，违反让权等待</li>
<li data-line="1" dir="auto">优点：进程等待期间不需要切换上下文，多处理机系统中，若上锁时间很短，则等待代价很小</li>
<li data-line="2" dir="auto">常用于多处理机，一个核忙等，其他核可以正常工作，并且快速释放资源</li>
<li data-line="3" dir="auto">不太适用于单处理机系统，忙等的过程中不可能解锁</li>
</ul></div></div></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="信号量机制" dir="auto" class="heading" id="信号量机制">信号量机制</h1><div class="heading-children"><div class="el-p"><p dir="auto">——信号量机制是一种功能比较强的机制，可以用来解决互斥和同步问题，他只能被两个原语 wait 和 signal 访问，也可以简写为 P()和 V()，可以使用上述操作来操作信号量 </p></div><div class="el-h2 heading-wrapper"><h2 data-heading="整形信号量" dir="auto" class="heading" id="整形信号量"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>整形信号量</h2><div class="heading-children"><div class="el-p"><p dir="auto">——用一种整数型的变量作为信号量表示系统中某种资源的数量</p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded"><span class="token comment">/*
下面的wait和signal函数在运行时是一气呵成的，并不会出现执行过程中断的问题
*/</span>

<span class="token keyword">int</span> S <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment">//初始化信号量S，表示可用的资源数</span>
<span class="token keyword">void</span> <span class="token function">Wait</span><span class="token punctuation">(</span><span class="token keyword">int</span> S<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>S<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//资源不够，一直循环等待</span>
	S<span class="token operator">=</span>S<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token comment">//资源够用，占用一个资源</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">Signal</span><span class="token punctuation">(</span><span class="token keyword">int</span> S<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	S <span class="token operator">=</span> S<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment">//释放一个资源</span>
<span class="token punctuation">}</span>

<span class="token comment">//进程访问临界资源的步骤</span>
<span class="token function">Wait</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
使用打印机资源<span class="token punctuation">;</span>
<span class="token function">Signal</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h3 heading-wrapper"><h3 data-heading="存在的问题" dir="auto" class="heading" id="存在的问题"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>存在的问题</h3><div class="heading-children"><div class="el-p"><p dir="auto">不满足让权等待的原则，当进程无法获取到对应的资源，那么会一直循环等待，直到时间片到达下处理机</p></div></div></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="记录型信号量" dir="auto" class="heading" id="记录型信号量"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>记录型信号量</h2><div class="heading-children"><div class="el-p"><p dir="auto">——整形信号量的缺陷是存在忙等问题，因此就提出了记录行信号量</p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded"><span class="token comment">//记录型信号量的定义</span>
<span class="token keyword">typedef</span> <span class="token keyword">struct</span><span class="token punctuation">{</span>
	<span class="token keyword">int</span> value<span class="token punctuation">;</span>           <span class="token comment">//剩余资源数</span>
	<span class="token keyword">struct</span> <span class="token class-name">process</span> <span class="token operator">*</span>L<span class="token punctuation">;</span>   <span class="token comment">//进程等待队列</span>
<span class="token punctuation">}</span>semaphore<span class="token punctuation">;</span>

<span class="token comment">//进程访问临界资源的步骤</span>
<span class="token keyword">void</span> <span class="token function">wait</span><span class="token punctuation">(</span>semaphore S<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	S<span class="token punctuation">.</span>value<span class="token operator">--</span><span class="token punctuation">;</span>         <span class="token comment">//首先占用资源</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>value<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment">//检查资源是否能够支持被占用</span>
		add this process to S<span class="token punctuation">.</span>L<span class="token punctuation">;</span>
		<span class="token function">block</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//将进程从运行态转到阻塞态,转到等待队列中</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//signal操作</span>
<span class="token keyword">void</span> <span class="token function">signal</span><span class="token punctuation">(</span>semaphore S<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	S<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token comment">//释放占用的资源</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>value<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//表明在此之前还有进程需要访问这个资源</span>
		remove a process P from S<span class="token punctuation">.</span>L
		<span class="token function">wakeup</span><span class="token punctuation">(</span>P<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//唤醒进程，将其从阻塞态转为就绪态</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>如果 vlaue 小于 0, 那么就说明还有多少个进程在等待临界资源的释放</p>
</blockquote></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">对信号量 S 执行以此 P 操作, 意味着请求一个单位的资源, 需要执行 S.vaue--, 如果S.value&lt;0, 则说明资源已经分配完毕, 进程需要调用 block 进行阻塞, 主动放弃处理机, 遵循了"让权等待"的原则, 不会出现忙等的状态</li>
<li data-line="1" dir="auto">对信号量进行一次 V 操作, 意味着一单位的资源已经释放, 需要执行 S.value++, 如果+1 之后S.value 仍然小于 0, 则说明还有进程需要访问这个临界资源, 此时应该用 wakeup 原语唤醒一个进程, 被唤醒进程从阻塞态到就绪态</li>
</ul></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="用信号量实现进程互斥" dir="auto" class="heading" id="用信号量实现进程互斥"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>用信号量实现进程互斥</h2><div class="heading-children"><div class="el-ul"><ul>
<li data-line="0" dir="auto">分析并发进程的关键活动, 划定临界区</li>
<li data-line="1" dir="auto">设置互斥信号量 mutex, <font color="#ff0000">初值为 1 </font>(信号量 mutex 表示进入临界区的名额)</li>
<li data-line="2" dir="auto">进入临界区 P (mutex)</li>
<li data-line="3" dir="auto">离开临界区 V (mutex)<br>
<strong>注意: 实现进程的互斥必须将 mutex 设置为 1, 对于不同的临界资源设置的 mutex 应该不一样, 表示不同的临界资源</strong><br>
PV 操作必须成对出现: 如果没有 P 操作, 那么就不能保证资源的互斥访问, 如果缺少 V 操作, 那么等待的进程就永远不会被唤醒</li>
</ul></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="用信号量机制实现进程的同步" dir="auto" class="heading" id="用信号量机制实现进程的同步"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>用信号量机制实现进程的同步</h2><div class="heading-children"><div class="el-p"><p dir="auto">——进程同步就是让个并发的进程有序的执行</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">什么地方需要保证进程的同步关系，必须保证一前一后的执行</li>
<li data-line="1" dir="auto">设置同步信号量 S，<font color="#ff0000">初始值为 0</font></li>
<li data-line="2" dir="auto">在前操作后面执行 V (S)</li>
<li data-line="3" dir="auto">在后操作前面执行P(S)<br>
例如，需要将代码 4 在代码 2 之后运行，可以在 code2 后加一个 V 操作，code 4 前加一个 P 操作</li>
</ul></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded"><span class="token comment">//初始化S的值为0</span>
semaphore S <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token function">P1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	code <span class="token number">1</span><span class="token punctuation">;</span>
	code <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token function">V</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//执行一个V操作，以便于后面的P操作能够正常运行</span>
	code <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">P2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">P</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//必须等待V操作之后才能执行P操作</span>
	code <span class="token number">4</span><span class="token punctuation">;</span>
	code <span class="token number">5</span><span class="token punctuation">;</span>
	code <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>对于上述代码只有 code 2 后面的 V 操作之后才能执行 P 操作后面的 code4，否则就需要等待</p>
</blockquote></div></div></div><div class="el-h2 heading-wrapper"><h2 data-heading="用信号量实现前驱关系" dir="auto" class="heading" id="用信号量实现前驱关系"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>用信号量实现前驱关系</h2><div class="heading-children"><div class="el-p"><p dir="auto"><span alt="Pasted image 20250524162954.png" src="Pasted image 20250524162954.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20250524162954.png" src="review/操作系统/2.进程、线程/img/pasted-image-20250524162954.png"></span></p></div><div class="el-blockquote"><blockquote dir="auto">
<p><span style="background:rgba(205, 244, 105, 0.55)">对于上述这种有前驱关系的执行流程图来说。每一对关系都对应一个进程同步问题</span></p>
</blockquote></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">为每一对同步关系设置一个信号量</li>
<li data-line="1" dir="auto">在对应前操作之后执行一个 V 操作</li>
<li data-line="2" dir="auto">在对应后操作之前执行一个 P 操作</li>
</ul></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">
seamphore a12 <span class="token operator">=</span> a13 <span class="token operator">=</span> a24 <span class="token operator">=</span> a25 <span class="token operator">=</span> a46 <span class="token operator">=</span> a56 <span class="token operator">=</span> a36 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//初始化信号量</span>
<span class="token function">S1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	进程S1执行<span class="token punctuation">;</span>
	<span class="token function">V</span><span class="token punctuation">(</span>a12<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//唤醒对应的进程</span>
	<span class="token function">V</span><span class="token punctuation">(</span>a13<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">S2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">P</span><span class="token punctuation">(</span>a12<span class="token punctuation">)</span><span class="token punctuation">;</span>
	进程S2执行<span class="token punctuation">;</span>
	<span class="token function">V</span><span class="token punctuation">(</span>a24<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">V</span><span class="token punctuation">(</span>a25<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">S3</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">P</span><span class="token punctuation">(</span>a13<span class="token punctuation">)</span><span class="token punctuation">;</span>
	进程S3执行<span class="token punctuation">;</span>
	<span class="token function">V</span><span class="token punctuation">(</span>a36<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">S4</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">P</span><span class="token punctuation">(</span>a24<span class="token punctuation">)</span><span class="token punctuation">;</span>
	进程S4执行<span class="token punctuation">;</span>
	<span class="token function">V</span><span class="token punctuation">(</span>a46<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">S5</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">P</span><span class="token punctuation">(</span>a25<span class="token punctuation">)</span><span class="token punctuation">;</span>
	进程S5执行<span class="token punctuation">;</span>
	<span class="token function">V</span><span class="token punctuation">(</span>a56<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">S6</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">P</span><span class="token punctuation">(</span>a36<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">P</span><span class="token punctuation">(</span>a56<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">P</span><span class="token punctuation">(</span>a46<span class="token punctuation">)</span><span class="token punctuation">;</span>
	进程S6执行<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div></div></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="生产者消费者问题" dir="auto" class="heading" id="生产者消费者问题">生产者消费者问题</h1><div class="heading-children"><div class="el-p"><p dir="auto">在系统中有生产者进程和消费者进程，生产者进程每次生产一个产品放入缓冲区，消费者进程每次从缓冲区中取出一个产品使用（这里的产品指某种数据）</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">生产者和消费者共享一个缓冲区</li>
<li data-line="1" dir="auto">只有缓冲区没满时，生产者才能向缓冲区中放数据，否则等待</li>
<li data-line="2" dir="auto">只有缓冲区中不为空时，消费者才能从缓冲区中取数据，否则等待</li>
<li data-line="3" dir="auto">缓冲区是临界资源，生产者需要互斥的访问缓冲区</li>
</ul></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">设置各信号量的初始值，互斥信号量mutex为<span class="token number">1</span>，生产者同步信号量为空的缓冲区大小，empty为n，消费者信号量为资源的数量。full初始值为<span class="token number">0</span>
semaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
semaphore empty <span class="token operator">=</span> n<span class="token punctuation">;</span>
semaphore full <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		生产一个产品<span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//1：申请一个空闲的缓冲区</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//6：缓冲区资源互斥，需要对mutex进行PV操作</span>
		把产品放入缓冲区
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//2：表示增加了一个产品的数量</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>true<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//3：从缓冲区中拿取数据</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		从缓冲区中拿产品
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//4：增加了一个空闲缓冲区的数量</span>
		使用产品

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>实现互斥操作是在同一个进程的代码中进行 PV 操作实现的，但是同步关系就是在两个进程中进行 PV 操作，一个进程进行 V 操作，然后另一个进程进行 P 操作，执行 V 操作的进程完成之后会唤醒对应执行 P 操作的进程，实现互斥的 P 操作一定要在实现同步的 P 操作之后，否则会造成死锁的现象，两个进程都在同时等待被对方唤醒，V 操作不会影响进程阻塞，因此 V 操作可以交换位置</p>
</blockquote></div><div class="el-p"><p dir="auto"><span alt="Pasted image 20250524170755.png" src="Pasted image 20250524170755.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20250524170755.png" src="review/操作系统/2.进程、线程/img/pasted-image-20250524170755.png"></span><br>
<font color="#ff0000">实现互斥的 P 操作一定要在实现同步的 P 操作之后</font></p></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="多生产者多消费者问题" dir="auto" class="heading" id="多生产者多消费者问题">多生产者多消费者问题</h1><div class="heading-children"><div class="el-p"><p dir="auto">多类生产者和多类消费者共享同一个缓冲区，生产者和消费者生产和消费的东西不一样<br>
例如：生产者 1、生产者 2、消费者 1、消费者 2，共享空间<br>
分析：</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">互斥关系：对于共享空间的访问需要互斥</li>
<li data-line="1" dir="auto">同步关系：生产者 1 完成之后消费者 1 才能执行<br>
生产者 2 完成之后消费者 2 才能执行<br>
只有共享空间为空时生产者才能往里写入内容</li>
</ul></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded"><span class="token comment">/*
首先定义mutex = 1;实现互斥锁
然后定义product1 = 0;表示当前产物为0
定义product2 = 0;表示当前产物2
定义buf = 1;表示当前缓冲区的大小
*/</span>

<span class="token comment">//producer1</span>
<span class="token function">produce1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		准备一个产物<span class="token number">1</span>
		<span class="token function">P</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		将产物放入共享空间
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>product1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//producer2</span>
<span class="token function">producer2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		准备一个产物<span class="token number">2</span>
		<span class="token function">P</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		将产物放入共享空间
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>product2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//consumer1</span>
<span class="token function">consumer1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>product1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		从共享空间中取出product1
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
		消费product1
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//consumer2</span>
<span class="token function">consumer2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>product2<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		从共享空间中取出product2
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span>
		消费product2
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">对于生产者和消费者的问题需要从事件来考虑，重点关注资源的变化，资源变化引发事件的变化</p></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="读者写者问题" dir="auto" class="heading" id="读者写者问题">读者写者问题</h1><div class="heading-children"><div class="el-p"><p dir="auto">有多个进程对同一个文件进行读写操作，规定</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">允许多个进程同时对文件进行读操作</li>
<li data-line="1" dir="auto">只允许一个写进程往文件中写信息</li>
<li data-line="2" dir="auto">任一写者写完之前，不允许其他读者、写者进行操作</li>
<li data-line="3" dir="auto">写者执行写操作之前应让所有的读者和写者退出</li>
</ul></div><div class="el-p"><p dir="auto">分析：</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">互斥关系：读进程-写进程、写进程-写进程</li>
<li data-line="1" dir="auto">读进程和读进程之间不存在互斥关系</li>
</ul></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">semaphore rw <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   <span class="token comment">//设置rw信号量实现互斥访问</span>
<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token comment">//表示有多少个读进程在访问文件</span>
semaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//保证count的判断以及赋值是一气呵成的</span>

<span class="token comment">//写进程解决与读进程和写进程之间的互斥问题</span>
<span class="token function">writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>
		写文件
		<span class="token function">V</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//读进程主要解决的是与写进程之间的互斥问题</span>
<span class="token function">reader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>      <span class="token comment">//使进程之间互斥访问count</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token function">P</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//第一个读进程对文件进行加锁</span>
		count<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
		读文件
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
		count<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token function">V</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//最后一个读进程对文件进行解锁</span>
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>对于上述进程，如果，两个进程并发的对文件进行访问，都会认为 count=0，然后给文件加锁，此时另外一个进程进行加锁时会发现文件已经被加锁，所以会发生阻塞<br>
问题出现的原因是因为：进程对 count 的判断和++操作不是一气呵成的，而是可以被中断的，解决办法，可以使进程之间互斥的访问 count 变量</p>
</blockquote></div><div class="el-p"><p dir="auto"><strong>潜在的问题</strong><br>
——如果一直有读进程在读，那么写进程就会一直等，可能会出现饿死的现象，可以认为读进程有更高的优先级</p></div><div class="el-p"><p dir="auto"><strong>解决写写进程优先级低的问题</strong><br>
——如果有一个写进程申请写文件，那么后续的读进程的读操作都需要终止，是一个互斥的关系<br>
引入一个新的信号量 w，用来保证写进程的优先级</p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">semaphore rw <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>   <span class="token comment">//设置rw信号量实现互斥访问</span>
<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token comment">//表示有多少个读进程在访问文件</span>
semaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//保证count的判断以及赋值是一气呵成的</span>
seamphore w <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//用于解决写进程饥饿的问题</span>

<span class="token comment">//写进程解决与读进程和写进程之间的互斥问题</span>
<span class="token function">writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>
		写文件
		<span class="token function">V</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//读进程主要解决的是与写进程之间的互斥问题</span>
<span class="token function">reader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>      <span class="token comment">//使进程之间互斥访问count</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token function">P</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">//第一个读进程对文件进行加锁</span>
		count<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
		<span class="token function">V</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span>
		读文件
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
		count<span class="token operator">--</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
			<span class="token function">V</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//最后一个读进程对文件进行解锁</span>
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>分析：对于读进程的并发，如果此时有一个写进程申请对文件的访问，首先会对 w 进行 P 操作，然后后续的读进程就暂时无法访问文件资源，只能等到写进程结束之后才能获得 w 信号量，然后才能继续读进程接下来的操作</p>
</blockquote></div><div class="el-p"><p dir="auto">对于信号量 w 来说，就是起到一个先来先服务的作用</p></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="哲学家进餐问题" dir="auto" class="heading" id="哲学家进餐问题">哲学家进餐问题</h1><div class="heading-children"><div class="el-p"><p dir="auto">——一个圆桌上有若干位哲学家，他们只有思考和进餐这两个动作，每个哲学家的左手和右手都只有一根筷子，只有左右两根筷子都存在才能正常进餐，否则产生阻塞<br>
分析：</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">每个哲学家与其左右的哲学家存在互斥关系，因为只有在左右两根筷子都存在的时候当前哲学家才能正常进餐</li>
<li data-line="1" dir="auto">需要两个临界资源才能正常进行，如何避免临界资源分配不当造成的死锁现象是问题的精髓<br>
<strong>信号量设置：设置信号量数组{1，1，1，1，1}，将哲学家进行编号 0，1，2，3，4，对于第 i 个哲学家左边的筷子编号为 i，右边的筷子编号为（i+1）%5</strong></li>
</ul></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">semaphore chopsticks<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">Pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		吃饭
		<span class="token function">V</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		思考
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>问题的产生</strong><br>
当所有的哲学家都之心那个吃饭时先申请左边的筷子，然后再申请右边的筷子，发现无法申请，所有哲学家都阻塞，发生死锁问题<br>
<span alt="Pasted image 20250527154457.png" src="Pasted image 20250527154457.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20250527154457.png" src="review/操作系统/2.进程、线程/img/pasted-image-20250527154457.png"></span><br>
<strong>如何防止死锁的发生呢</strong></p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">限制每次进餐的哲学家数量，至少保证有一个哲学家对临界资源的访问正常</li>
<li data-line="1" dir="auto">或者奇数号的哲学家先拿左边的筷子，偶数号的优先申请右边的筷子</li>
<li data-line="2" dir="auto">仅当哲学家左右两边筷子都在时才允许进餐，拿筷子这件事是互斥进行的<br>
通过以上方法，避免了进程占用资源之后发生阻塞的问题<br>
<strong>方法一</strong></li>
</ul></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">semaphore count <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>     <span class="token comment">//表示当前最多允许四个哲学家就餐</span>
semaphore chopsticks<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">Pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		就餐
		<span class="token function">V</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>shopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
		思考
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>方法二</strong></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">semaphore chopsticks<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">Pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">2</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token comment">//偶数编号优先申请右边</span>
			<span class="token function">P</span><span class="token punctuation">(</span>shopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">P</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			就餐
			<span class="token function">V</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">V</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			思考
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{</span>
			<span class="token function">P</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">P</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			就餐
			<span class="token function">V</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">V</span><span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			思考
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>方法三</strong></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">Semaphore chopsticks<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">Pi</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">While</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span> <span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">P</span> <span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
		吃饭
		<span class="token function">V</span> <span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">V</span> <span class="token punctuation">(</span>chopsticks<span class="token punctuation">[</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		思考
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p>该方法每次只允许一个哲学家进行资源的申请，只有都满足时才能使哲学家进行就餐，但是会产生一个问题，不能正常进餐的哲学家会阻塞能够正常进餐的哲学家</p>
</blockquote></div></div></div><div class="el-h1 heading-wrapper"><h1 data-heading="管程" dir="auto" class="heading" id="管程">管程</h1><div class="heading-children"><div class="el-p"><p dir="auto">管程解决的问题：解决信号量机制大量同步操作分散的问题<br>
——信号量机制存在的问题，编程困难，易出错<br>
管程是一种高级的同步机制<br>
管程是一种特殊的软件模块，由这些部件组成</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">局部于管程的数据结构说明</li>
<li data-line="1" dir="auto">对该数据结构进行操作的一组说明</li>
<li data-line="2" dir="auto">对局部于管程的共享数据设置初始值</li>
<li data-line="3" dir="auto">管程有一个名字<br>
<strong>与 C++中的类相似，包含了构造函数，类对象，类函数等</strong><br>
管程的基本特征</li>
<li data-line="6" dir="auto">局部于管程的数据只能由局部于管程的过程访问</li>
<li data-line="7" dir="auto">一个进程只有通过调用管程内的过程才能进入管程访问数据</li>
<li data-line="8" dir="auto"><font color="#ff0000">每次允许一个进程在管程内执行某个内部过程</font></li>
</ul></div><div class="el-pre"><pre class="language-none" tabindex="0"><code data-line="0" class="language-c++ language-none is-loaded">monitor ProducerConsumer
condition full,empty;
int count = 0;
void insert (Item item)
{
	if(count==N)
		wait(full);
	count++;
	insert_item(item);
	if(count==1)
		signal(empty);
}
Item Remove(Item)
{
	if(count==0)
		wait(empty);
	count--;
	if(count==N-1)
		signal(full)
	return remove_item();
}
end monitor

Producer()
{
	while(1)
	{
		item = product;
		ProducerConsumer.insert(item);
	}
}

Consumer()
{
	while(1)
	{
		item = ProducerConsumer.remove()
		consume = item
	}
}
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">由编译器实现各进程互斥的进入管程中的过程<br>
对于信号的解释：</p></div><div class="el-ul"><ul>
<li data-line="0" dir="auto">当消费者移出 item，如果此时为空，那么对应进程就会挂在 empty 信号的队尾</li>
<li data-line="1" dir="auto">当生产者执行时，发现缓冲区中一开始为空，那么就会发送 empty 信号唤醒对应 empty 信号后的进程</li>
<li data-line="2" dir="auto">当生产者生产时发现缓冲区已满，那么就会等待，将进程挂在 full 信号的队尾</li>
<li data-line="3" dir="auto">当消费者执行时发现缓冲区中一开始为满，取走元素之后发送 full 信号唤醒对应 full 信号后的进程</li>
</ul></div><div class="mod-footer mod-ui"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#基本概念的引入" data-path=""><div class="tree-item-contents heading-link" heading-name="基本概念的引入"><span class="tree-item-title">基本概念的引入</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#进程互斥的软件实现方法" data-path=""><div class="tree-item-contents heading-link" heading-name="进程互斥的软件实现方法"><span class="tree-item-title">进程互斥的软件实现方法</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#单标志法" data-path=""><div class="tree-item-contents heading-link" heading-name="单标志法"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">单标志法</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#问题的产生" data-path=""><div class="tree-item-contents heading-link" heading-name="问题的产生"><span class="tree-item-title">问题的产生</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#双标志先检查法" data-path=""><div class="tree-item-contents heading-link" heading-name="双标志先检查法"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">双标志先检查法</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#问题的产生" data-path=""><div class="tree-item-contents heading-link" heading-name="问题的产生"><span class="tree-item-title">问题的产生</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#双标志后检查法" data-path=""><div class="tree-item-contents heading-link" heading-name="双标志后检查法"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">双标志后检查法</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#问题的产生" data-path=""><div class="tree-item-contents heading-link" heading-name="问题的产生"><span class="tree-item-title">问题的产生</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#Peterson_算法" data-path=""><div class="tree-item-contents heading-link" heading-name="Peterson 算法"><span class="tree-item-title">Peterson 算法</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#进程互斥的硬件实现方法" data-path=""><div class="tree-item-contents heading-link" heading-name="进程互斥的硬件实现方法"><span class="tree-item-title">进程互斥的硬件实现方法</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#中断屏蔽法" data-path=""><div class="tree-item-contents heading-link" heading-name="中断屏蔽法"><span class="tree-item-title">中断屏蔽法</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#TestAndSet_指令" data-path=""><div class="tree-item-contents heading-link" heading-name="TestAndSet 指令"><span class="tree-item-title">TestAndSet 指令</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#SWAP_指令" data-path=""><div class="tree-item-contents heading-link" heading-name="SWAP 指令"><span class="tree-item-title">SWAP 指令</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#锁" data-path=""><div class="tree-item-contents heading-link" heading-name="锁"><span class="tree-item-title">锁</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#互斥锁" data-path=""><div class="tree-item-contents heading-link" heading-name="互斥锁"><span class="tree-item-title">互斥锁</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#信号量机制" data-path=""><div class="tree-item-contents heading-link" heading-name="信号量机制"><span class="tree-item-title">信号量机制</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#整形信号量" data-path=""><div class="tree-item-contents heading-link" heading-name="整形信号量"><div class="collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">整形信号量</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#存在的问题" data-path=""><div class="tree-item-contents heading-link" heading-name="存在的问题"><span class="tree-item-title">存在的问题</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#记录型信号量" data-path=""><div class="tree-item-contents heading-link" heading-name="记录型信号量"><span class="tree-item-title">记录型信号量</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#用信号量实现进程互斥" data-path=""><div class="tree-item-contents heading-link" heading-name="用信号量实现进程互斥"><span class="tree-item-title">用信号量实现进程互斥</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#用信号量机制实现进程的同步" data-path=""><div class="tree-item-contents heading-link" heading-name="用信号量机制实现进程的同步"><span class="tree-item-title">用信号量机制实现进程的同步</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#用信号量实现前驱关系" data-path=""><div class="tree-item-contents heading-link" heading-name="用信号量实现前驱关系"><span class="tree-item-title">用信号量实现前驱关系</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#生产者消费者问题" data-path=""><div class="tree-item-contents heading-link" heading-name="生产者消费者问题"><span class="tree-item-title">生产者消费者问题</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#多生产者多消费者问题" data-path=""><div class="tree-item-contents heading-link" heading-name="多生产者多消费者问题"><span class="tree-item-title">多生产者多消费者问题</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#读者写者问题" data-path=""><div class="tree-item-contents heading-link" heading-name="读者写者问题"><span class="tree-item-title">读者写者问题</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#哲学家进餐问题" data-path=""><div class="tree-item-contents heading-link" heading-name="哲学家进餐问题"><span class="tree-item-title">哲学家进餐问题</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="1"><a class="tree-link" href="review\操作系统\2.进程、线程\2.3进程同步和互斥.html#管程" data-path=""><div class="tree-item-contents heading-link" heading-name="管程"><span class="tree-item-title">管程</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>